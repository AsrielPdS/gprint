"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.end = exports.ly = exports.l = exports.is = exports.dtP = exports.numbP = exports.sep = exports.cut = exports.e = exports.p = exports.img = exports.tbf = exports.tb = exports.tbh = exports.ph = exports.d = exports.c = exports.r = exports.tr = exports.hr = void 0;
const util_js_1 = require("galho/util.js");
const hr = (s) => ({ tp: "hr", s });
exports.hr = hr;
const tr = (...bd) => ({ tp: "tr", bd });
exports.tr = tr;
const r = (...bd) => ({ tp: "row", bd });
exports.r = r;
const c = (...bd) => ({ tp: "col", bd: bd.map(v => (0, util_js_1.isS)(v) ? { bd: v } : v) });
exports.c = c;
const d = (...bd) => ({ tp: "d", bd: bd.map(v => (0, util_js_1.isS)(v) ? { bd: v } : v) });
exports.d = d;
const ph = (bd) => ({ tp: "ph", bd });
exports.ph = ph;
const tbh = (cols, hd, ...bd) => ({ tp: "tb", cols, hd, bd });
exports.tbh = tbh;
const tb = (cols, ...bd) => ({ tp: "tb", cols, bd: bd.map(i => (0, util_js_1.isA)(i) ? (0, exports.tr)(...i) : i) });
exports.tb = tb;
const tbf = (cols, hd, bd, ft) => ({ tp: "tb", cols, hd, bd: (0, util_js_1.arr)(bd), ft });
exports.tbf = tbf;
const img = (bd, w, h) => ({ tp: "img", bd, is: { w, h } });
exports.img = img;
const p = (bd, style, al) => ({ s: style || void 0, is: al ? { al } : void 0, bd });
exports.p = p;
const e = (bd, fmt, style, al) => ({ s: style || undefined, is: al && { al }, bd: [{ tp: "e", bd: fmt ? `fmt(${bd},${fmt.split(';').reverse()})` : bd }] });
exports.e = e;
const cut = () => ({ tp: "hr", s: "cut" });
exports.cut = cut;
const sep = () => ({ tp: "hr", s: 'divider' });
exports.sep = sep;
const numbP = (bd, style, fmt = '$', al = "e") => ({ s: style || undefined, is: { al: al || undefined }, bd: `=fmt(${bd},${fmt})` });
exports.numbP = numbP;
const dtP = (bd) => ({ bd: [{ tp: "e", bd: `fmt(${bd},D)` }] });
exports.dtP = dtP;
const is = (box, is) => (0, util_js_1.assign)(box, { is });
exports.is = is;
const l = (box, ly) => (0, util_js_1.assign)(box, { ly });
exports.l = l;
const ly = (box, ly) => (0, util_js_1.assign)(box, { ly });
exports.ly = ly;
function end(base, ...ends) {
    let end = (ends.length == 1 && ends[0].tp == "col" ? ends[0] : {
        tp: "col",
        ub: true,
        dt: ends
    });
    (end.ly || (end.ly = {})).sz = 1;
    end.align = "e";
    base.push(end);
    return {
        tp: "col",
        sc: "data",
        ly: { fill: true },
        bd: base
    };
}
exports.end = end;
function tbSize(...cols) {
    let l = cols.length;
    var total = 0;
    for (let i = 0; i < l; i++) {
        let s = cols[i] ||= 100 / l;
        total += (0, util_js_1.isN)(s) ? s : s.sz;
    }
    for (let i = 0; i < l; i++) {
        let c = cols[i], v = ((0, util_js_1.isN)(c) ? c : c.sz) * 100 / total;
        (0, util_js_1.isN)(c) ? (cols[i] = v) : (c.sz = v);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQ0FBdUY7QUFPaEYsTUFBTSxFQUFFLEdBQUcsQ0FBVSxDQUFPLEVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFBckQsUUFBQSxFQUFFLE1BQW1EO0FBQzNELE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFrQixFQUFhLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0FBQTdELFFBQUEsRUFBRSxNQUEyRDtBQUluRSxNQUFNLENBQUMsR0FBRyxDQUFjLEdBQUcsRUFBaUIsRUFBVyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUF4RSxRQUFBLENBQUMsS0FBdUU7QUFFOUUsTUFBTSxDQUFDLEdBQUcsQ0FBYyxHQUFHLEVBQXlCLEVBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBQSxhQUFHLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFBckgsUUFBQSxDQUFDLEtBQW9IO0FBRTNILE1BQU0sQ0FBQyxHQUFHLENBQWMsR0FBRyxFQUEyQixFQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUEsYUFBRyxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxF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