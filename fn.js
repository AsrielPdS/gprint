import { arr, assign, isA, isN, isS } from "galho/util.js";
/**
 * horizontal rule
 * @param s style
 */
export const hr = (s) => ({ tp: "hr", s });
export const tr = (...bd) => ({ tp: "tr", bd: bd.map(v => isS(v) ? { bd: v } : v) });
// /**table row with head */
// export const th = (hd: iBoxes<void>, ...bd: iBoxes<TrLy>[]): iTr => ({ tp: "tr", hd, bd });
/** row*/
export const r = (...bd) => ({ tp: "row", bd: bd.map(v => isS(v) ? { bd: v } : v) });
/** column*/
export const c = (...bd) => ({ tp: "col", bd: bd.map(v => isS(v) ? { bd: v } : v) });
/** column*/
export const d = (...bd) => ({ tp: "d", bd: bd.map(v => isS(v) ? { bd: v } : v) });
/**placeholder */
export const ph = (bd) => ({ tp: "ph", bd });
/**table with head */
export const tbh = (cols, hd, ...bd) => ({ tp: "tb", cols, hd, bd });
/**table */
export const tb = (cols, ...bd) => ({ tp: "tb", cols, bd: bd.map(i => isA(i) ? tr(...i) : i) });
/** full table(table with head, body and foot) */
export const tbf = (cols, hd, bd, ft) => ({ tp: "tb", cols, hd, bd: arr(bd), ft });
/**image */
export const img = (bd, sz) => ({ tp: "img", bd, sz });
export const p = (bd, style, al) => 
/*isS(bd) && !al && !style ? bd :*/ ({ s: style || void 0, is: al ? { al } : void 0, bd });
/** @deprecated expression */
export const e = (bd, fmt, style, al) => ({ s: style || undefined, is: al && { al }, bd: [{ tp: "e", bd: fmt ? `fmt(${bd},${fmt.split(';').reverse()})` : bd }] });
//-----------------extras----------------
// export type DomAlign = "center" | "justify" | "left" | "right" | "start" | "end";
export const cut = () => ({ tp: "hr", s: "cut" });
export const sep = () => ({ tp: "hr", s: 'divider' });
// export const dateP = (data: str): iP =>
//   ({ bd: [{ tp: "e", bd: data, fmt: 'd;d' }] });
// /** block of paragraphs*/
// export const block = (...bd: (iBoxes | str)[]): iCol => ({ tp: "col", bd });
/**datetime paragraph */
export const dtP = (bd) => ({ bd: [{ tp: "e", bd: `fmt(${bd},D)` }] });
/**define inline style */
export const is = (box, is) => assign(box, { is });
/**@deprecated define layout */
export const l = (box, ly) => assign(box, { ly });
/**define layout */
export const ly = (box, ly) => assign(box, { ly });
// /** scalar */
// export function s<L = any>(data: str, style?: str, fmt?: str, al?: Align): iBoxes<L> {
//   return { s: style, is: { al: al || void 0 }, bd: [{ tp: "e", bd: fmt?`fmt(${bd},D)`:bd }] };
// }
// export const st = <L = any>(value: str, tp?: "t" | "s" | "img", fmt?: str) => tp == "s" ? s<L>(value, "strong", fmt) : p<L>(value, "strong");
// export function currPH(data: str): iBoxes {
//   return { bd: [{ bd: data }], is: { al: "e" } }
// }
export function end(base, ...ends) {
    let end = (ends.length == 1 && ends[0].tp == "col" ? ends[0] : {
        tp: "col",
        ub: true,
        dt: ends
    });
    (end.ly || (end.ly = {})).sz = 1;
    end.align = "e";
    base.push(end);
    return {
        tp: "col",
        sc: "data",
        ly: { fill: true },
        bd: base
    };
}
function tbSize(...cols) {
    let l = cols.length;
    var total = 0;
    for (let i = 0; i < l; i++) {
        let s = cols[i] ||= 100 / l;
        total += isN(s) ? s : s.sz;
    }
    for (let i = 0; i < l; i++) {
        let c = cols[i], v = (isN(c) ? c : c.sz) * 100 / total;
        isN(c) ? (cols[i] = v) : (c.sz = v);
    }
}
// export function align(align: DomAlign): TAlign {
//   switch (align) {
//     case 'center': return "c";
//     case 'end': return "e";
//     case 'left': return "l";
//     case 'right': return "r";
//     case 'justify': return "j";
//     default: return "s";
//   }
// }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBVSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUc3RTs7O0dBR0c7QUFDSCxNQUFNLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBVSxDQUFPLEVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbEUsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxFQUEwQixFQUFhLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUN0SCw0QkFBNEI7QUFDNUIsOEZBQThGO0FBQzlGLFNBQVM7QUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBYyxHQUFHLEVBQXlCLEVBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2pJLFlBQVk7QUFDWixNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBYyxHQUFHLEVBQXlCLEVBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FB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